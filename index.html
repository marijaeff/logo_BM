<!DOCTYPE html>
<html lang="lv">
<head>
  <meta charset="UTF-8">
  <title>Turtle Logo Votes</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: #333;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .container {
      width: 500px;
      height: 500px;
      position: relative;
      overflow: hidden;
      mask-image: url('logo-mask.svg');
      mask-size: contain;
      mask-repeat: no-repeat;
      mask-position: center;
      -webkit-mask-image: url('logo-mask.svg');
      -webkit-mask-size: contain;
      -webkit-mask-repeat: no-repeat;
      -webkit-mask-position: center;
      background-color: #FAF3E9;
      border-radius: 20px;
    }

    .circle {
      position: absolute;
      border-radius: 50%;
      opacity: 0.6;
      animation: pulse 2.5s infinite ease-in-out, wander 30s infinite ease-in-out;
      will-change: transform;
    }

    .circle:hover {
      animation: vibrate 0.4s infinite ease-in-out;
      transform: scale(1.3);
      z-index: 2;
      opacity: 1;
      transition: transform 0.4s ease, opacity 0.4s ease;
    }

    @keyframes vibrate {
      0% { transform: scale(1.3) translate(0, 0); }
      25% { transform: scale(1.3) translate(0.5px, -0.5px); }
      50% { transform: scale(1.3) translate(-0.5px, 0.5px); }
      75% { transform: scale(1.3) translate(0.5px, 0.5px); }
      100% { transform: scale(1.3) translate(-0.5px, -0.5px); }
    }

    @keyframes pulse {
      0% { transform: scale(1); opacity: 0.7; }
      50% { transform: scale(1.2); opacity: 0.5; }
      100% { transform: scale(1); opacity: 0.7; }
    }

    @keyframes wander {
      0%   { transform: translate(0px, 0px); }
      20%  { transform: translate(40px, -30px); }
      40%  { transform: translate(-50px, 20px); }
      60%  { transform: translate(30px, 40px); }
      80%  { transform: translate(-40px, -20px); }
      100% { transform: translate(0px, 0px); }
    }

    .tooltip {
      position: fixed;
      background: rgba(255, 255, 255, 0.95);
      color: #333;
      padding: 5px 10px;
      border-radius: 8px;
      font-size: 14px;
      pointer-events: none;
      opacity: 0;
      transform: translate(-50%, -120%);
      transition: opacity 0.2s ease, transform 0.2s ease;
      white-space: nowrap;
      z-index: 99;
    }

    canvas {
      display: none;
    }
  </style>
</head>
<body>
  <div class="container" id="voteContainer"></div>
  <div id="tooltip" class="tooltip"></div>
  <canvas id="maskCanvas" width="500" height="500"></canvas>

  <script>
    const voteCount = 40;

    const palette = [
      { color: '#FF6F91', emotion: 'Skumji' },
      { color: '#FFB347', emotion: 'Noguris' },
      { color: '#FDFD96', emotion: 'Ok/Neitrāli' },
      { color: '#77DD77', emotion: 'Priecīgs' },
      { color: '#779ECB', emotion: 'Ļoti priecīgs' }
    ];

    const container = document.getElementById('voteContainer');
    const canvas = document.getElementById('maskCanvas');
    const ctx = canvas.getContext('2d');
    const tooltip = document.getElementById('tooltip');

    const img = new Image();
    img.src = 'logo-mask.svg';

    img.onload = () => {
      ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
      let added = 0;
      const maxAttempts = voteCount * 20;
      const sizeMultiplier = voteCount < 40 ? 1.5 : 1;

      let attempts = 0;
      while (added < voteCount && attempts < maxAttempts) {
        attempts++;

        const baseSize = Math.floor(Math.random() * 40) + 30;
        const size = baseSize * sizeMultiplier;
        const x = Math.random() * (canvas.width - size);
        const y = Math.random() * (canvas.height - size);

        const centerX = x + size / 2;
        const centerY = y + size / 2;
        const pixel = ctx.getImageData(centerX, centerY, 1, 1).data;

        if (pixel[3] > 10) {
          const circle = document.createElement('div');
          circle.className = 'circle';
          circle.style.width = `${size}px`;
          circle.style.height = `${size}px`;
          const selected = palette[Math.floor(Math.random() * palette.length)];
          circle.style.backgroundColor = selected.color;
          circle.style.top = `${y}px`;
          circle.style.left = `${x}px`;
          circle.style.animationDelay = `${Math.random() * 2}s, ${Math.random() * 8}s`;

          circle.addEventListener('mouseenter', () => {
            tooltip.textContent = selected.emotion;
            const rect = circle.getBoundingClientRect();
            tooltip.style.left = `${rect.left + rect.width / 2}px`;
            tooltip.style.top = `${rect.top}px`;
            tooltip.style.opacity = '1';
            tooltip.style.transform = 'translate(-50%, -120%)';
          });

          circle.addEventListener('mouseleave', () => {
            tooltip.style.opacity = '0';
          });

          container.appendChild(circle);
          added++;
        }
      }
    };
  </script>
</body>
</html>
